[Ссылка](https://github.com/GalovKirill/VasyaFired) на репозиторий с решением. Буду рад любому фидбеку по моей работе :)
#Немного о решении
Основной класс это `DismissalService` у него есть метод `DismissalService.GetStamps` который выполняет поставленную задачу. Этот метод возвращает обьект типа `GetStampsResult`, который хранит в себе информацию о том сколько раз был посещен отдел Q, попал ли Василий в бесконечный цикл, какие различные варианты обходного листа будут у Василия в процессе обхода отделов и т.д.

Класс `Organization.Builder`  поможет создать организацию, примеры его использования можно посмотреть в тестах `GetStampsTestCases`

Класс `StampsCollection` представляет собой обходный лист с печатями

Еще внимания заслуживает класс `InfinityCycleChecker` и его интерфейс `IInfinityCycleChecker`. Как мне кажется, могут быть разные стратегии проверки на зацикливание и оптимальная стратегия может зависить от структуры графа(организации). Например, если в организации отделы только с безусловными правилами, то для проверки на закцикливание достаточно лишь запоминать в каких отделах Василий уже был. 
В моей реализации этого интерфейса, при попадании на обратное ребро(которое ведет к отделу, в котором Вася уже был), я запоманию состояние обходного листа и при повторном попадании на это ребро проверяю: если обходной лист такой же как и был раньше, то Вася попал... в бесконечный цикл. Хотел реализовать еще такой вариант: вести историю переходов Васи и при попадании на обратное ребро восстанавливать, с помощью истории, состояние обходного листа в прошлом попадании, но время поджимало :)
